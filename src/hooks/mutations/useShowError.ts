import { useSnackbar } from 'notistack';
import type { OptionsObject } from 'notistack';

export const useShowError = (options?: OptionsObject) => {
  const { enqueueSnackbar } = useSnackbar();

  const renderErrorMessage = (err: any, customMessage?: string) => {
    let autoGeneratedMessage = err?.message || '';

    switch (err?.message) {
      case 'Network Error':
        autoGeneratedMessage = 'Network Error';
        break;
    }

    const errorMsg =
      customMessage ||
      err?.response?.data?.message ||
      autoGeneratedMessage ||
      'Network Error';

    enqueueSnackbar(errorMsg, { variant: 'error', ...options });
  };

  return renderErrorMessage;
};
